---
description: TanStack Router patterns and conventions
globs:
  - 'apps/suref-web/src/routes/**/*.tsx'
  - 'apps/suref-web/src/router.tsx'
alwaysApply: false
---

TanStack Router patterns for file-based routing in the web app.

- Routes are file-based in `src/routes/` with default exports for route components
- Route tree is auto-generated to `routeTree.gen.ts` (don't edit)
- Use `createRoute()` or `createFileRoute()` from `@tanstack/react-router`
- Define `beforeLoad` for data prefetching, use `loader` for route-level data fetching, use `component` for the route component
- Use `useNavigate()` hook for programmatic navigation
- Use `Link` component from `@tanstack/react-router` for links
- Use `useSearch()` for query params (with `strict: false` for optional params): `const search = useSearch({ strict: false }); const pattern = (search as { pattern?: string }).pattern`
- Prefer `beforeLoad` for server-side data fetching, use TanStack Query in components for client-side data, pass prefetched data via route context
- Access route context via `useRouteContext()`: `const { pilotId } = useRouteContext({ from: '/pilots/$id' })`
- Root route provides `serverUser` in context, use context for shared data across route tree
